(()=>{"use strict";const t=document.querySelector(".dm-q-product-name"),e=document.querySelector(".dm-q-product-pic"),o=document.querySelector(".dm-q-product-description"),n=(document.querySelector(".dm-q-current-question"),document.querySelector(".dm-q-btn-true")),c=document.querySelector(".dm-q-btn-false"),r=window.location.href.split(":")[2].split("/")[0],s=new URLSearchParams(window.location.search).get("correctOnesBack");let i,l=0;function a(){return Math.floor(20*Math.random()+1)}async function u(t){const e=await new Promise(((t,e)=>{fetch("http://127.0.0.1:8000/questions/api/used/").then((t=>{if(200===t.status)return t.json();throw new Error})).then((e=>{t(e)})).catch((t=>{e(`We have an error: ${t}.`)}))}));let o=[];for(let t=0;t<e.length;t++)o.push(e[t].question_id);return o.includes(t)}s>l&&(l=s),window.addEventListener("DOMContentLoaded",(()=>{!async function(){try{const s=await async function(){let t={question_id:""};const e=await async function(){let t=a();for(;await u(t);)t=a();return t}();return console.log(e),t.question_id=e,201===(await async function(t){return await fetch("http://127.0.0.1:8000/questions/api/used/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(t)).status&&console.log("Successfully added to data base!"),new Promise(((t,o)=>{fetch(`http://127.0.0.1:8000/questions/api/${e}/`).then((t=>{if(200===t.status)return t.json();throw new Error})).then((e=>{t(e)})).catch((t=>{o(`We have an error: ${t}.`)}))}))}();console.log(s),i=s,t.textContent=i.title,e.src=i.image,e.alt=i.title,o.textContent=i.question,n&&(n.onclick=()=>{!0===i.is_true?(l++,console.log(i.is_true),console.log(`Good boy! The product ${i.title} exists!`),window.location.href=`http://localhost:${r}/light-mode-right.html?correctOnes=${l}`):(console.log(i.is_true),console.log(`Try again! The product ${i.title} does not exist!`),window.location.href=`http://localhost:${r}/light-mode-false.html?correctOnes=${l}`)}),c&&(c.onclick=()=>{!1===i.is_true?(l++,console.log(i.is_true),console.log(`Good boy! ${i.title} is a non-existent product`),window.location.href=`http://localhost:${r}/light-mode-right.html?correctOnes=${l}`):(console.log(i.is_true),console.log(`Try again! ${i.title} exists!`),window.location.href=`http://localhost:${r}/light-mode-false.html?correctOnes=${l}`)})}catch(t){console.log(t)}}()}))})();